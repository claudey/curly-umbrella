<div class="space-y-6">
  <!-- Search Summary -->
  <div class="stats shadow">
    <div class="stat">
      <div class="stat-title">Total Results</div>
      <div class="stat-value"><%= results[:total_count] %></div>
      <div class="stat-desc">in <%= results[:search_time] %>s</div>
    </div>
    
    <% if results[:pagination] %>
      <div class="stat">
        <div class="stat-title">Page</div>
        <div class="stat-value text-sm"><%= results[:pagination][:current_page] %> of <%= results[:pagination][:total_pages] %></div>
        <div class="stat-desc">
          Showing <%= [((results[:pagination][:current_page] - 1) * results[:pagination][:per_page]) + 1, results[:total_count]].min %>-<%= [results[:pagination][:current_page] * results[:pagination][:per_page], results[:total_count]].min %> 
          of <%= results[:total_count] %>
        </div>
      </div>
    <% end %>
  </div>

  <!-- Results by Category -->
  <% if results[:clients][:results].any? %>
    <div class="card bg-base-100 shadow-lg">
      <div class="card-body">
        <div class="flex items-center justify-between mb-4">
          <h3 class="card-title">
            <%= phosphor_icon(:users, size: 5, class: "text-primary") %>
            Clients
            <div class="badge badge-primary"><%= results[:clients][:count] %></div>
          </h3>
        </div>
        
        <div class="space-y-3">
          <% results[:clients][:results].each do |client| %>
            <div class="border border-base-300 rounded-lg p-4 hover:bg-base-50 transition-colors">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <h4 class="font-semibold text-lg">
                    <%= link_to "#{client.first_name} #{client.last_name}", "#", class: "link link-primary" %>
                  </h4>
                  <p class="text-base-content/70"><%= client.email %></p>
                  <% if client.phone.present? %>
                    <p class="text-sm text-base-content/60"><%= client.phone %></p>
                  <% end %>
                </div>
                <div class="text-right">
                  <div class="badge badge-outline"><%= client.status&.humanize %></div>
                  <% if client.client_type.present? %>
                    <div class="badge badge-ghost badge-sm mt-1"><%= client.client_type.humanize %></div>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>

  <% if results[:applications][:results].any? %>
    <div class="card bg-base-100 shadow-lg">
      <div class="card-body">
        <div class="flex items-center justify-between mb-4">
          <h3 class="card-title">
            <%= phosphor_icon(:file_text, size: 5, class: "text-info") %>
            Applications
            <div class="badge badge-info"><%= results[:applications][:count] %></div>
          </h3>
        </div>
        
        <div class="space-y-3">
          <% results[:applications][:results].each do |application| %>
            <div class="border border-base-300 rounded-lg p-4 hover:bg-base-50 transition-colors">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <h4 class="font-semibold text-lg">
                    <%= link_to application.insurance_type.humanize, "#", class: "link link-info" %>
                  </h4>
                  <p class="text-base-content/70">
                    Client: <%= application.client.first_name %> <%= application.client.last_name %>
                  </p>
                  <p class="text-sm text-base-content/60">
                    Created: <%= application.created_at.strftime("%b %d, %Y") %>
                  </p>
                </div>
                <div class="text-right">
                  <div class="badge <%= application.status == 'approved' ? 'badge-success' : application.status == 'rejected' ? 'badge-error' : 'badge-warning' %>">
                    <%= application.status&.humanize %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>

  <% if results[:quotes][:results].any? %>
    <div class="card bg-base-100 shadow-lg">
      <div class="card-body">
        <div class="flex items-center justify-between mb-4">
          <h3 class="card-title">
            <%= phosphor_icon(:calculator, size: 5, class: "text-success") %>
            Quotes
            <div class="badge badge-success"><%= results[:quotes][:count] %></div>
          </h3>
        </div>
        
        <div class="space-y-3">
          <% results[:quotes][:results].each do |quote| %>
            <div class="border border-base-300 rounded-lg p-4 hover:bg-base-50 transition-colors">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <h4 class="font-semibold text-lg">
                    <%= link_to "Quote ##{quote.id}", quote_path(quote), class: "link link-success" %>
                  </h4>
                  <p class="text-base-content/70">
                    <% if quote.application&.client %>
                      Client: <%= quote.application.client.first_name %> <%= quote.application.client.last_name %>
                    <% end %>
                  </p>
                  <% if quote.insurance_company %>
                    <p class="text-sm text-base-content/60">
                      Insurer: <%= quote.insurance_company.name %>
                    </p>
                  <% end %>
                </div>
                <div class="text-right">
                  <div class="text-lg font-bold text-success">
                    <%= number_to_currency(quote.total_premium) if quote.total_premium %>
                  </div>
                  <div class="badge <%= quote.status == 'accepted' ? 'badge-success' : quote.status == 'rejected' ? 'badge-error' : 'badge-warning' %>">
                    <%= quote.status&.humanize %>
                  </div>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>

  <% if results[:documents][:results].any? %>
    <div class="card bg-base-100 shadow-lg">
      <div class="card-body">
        <div class="flex items-center justify-between mb-4">
          <h3 class="card-title">
            <%= phosphor_icon(:folder, size: 5, class: "text-warning") %>
            Documents
            <div class="badge badge-warning"><%= results[:documents][:count] %></div>
          </h3>
        </div>
        
        <div class="space-y-3">
          <% results[:documents][:results].each do |document| %>
            <div class="border border-base-300 rounded-lg p-4 hover:bg-base-50 transition-colors">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <h4 class="font-semibold text-lg">
                    <%= link_to document.name, document_path(document), class: "link link-warning" %>
                  </h4>
                  <% if document.description.present? %>
                    <p class="text-base-content/70"><%= truncate(document.description, length: 100) %></p>
                  <% end %>
                  <p class="text-sm text-base-content/60">
                    Uploaded: <%= document.created_at.strftime("%b %d, %Y") %>
                    <% if document.file_size %>
                      ‚Ä¢ <%= number_to_human_size(document.file_size) %>
                    <% end %>
                  </p>
                </div>
                <div class="text-right">
                  <% if document.document_type.present? %>
                    <div class="badge badge-outline"><%= document.document_type.humanize %></div>
                  <% end %>
                  <% if document.access_level.present? %>
                    <div class="badge badge-ghost badge-sm mt-1"><%= document.access_level.humanize %></div>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>

  <!-- No Results in Scope -->
  <% if results[:total_count] == 0 %>
    <div class="card bg-base-100 shadow-lg">
      <div class="card-body text-center">
        <div class="text-6xl mb-4">üîç</div>
        <h3 class="text-xl font-semibold mb-2">No results found</h3>
        <p class="text-base-content/70">
          No results found for "<%= results[:query] %>" 
          <% if results[:scope] != 'all' %>
            in <%= results[:scope].humanize %>
          <% end %>
        </p>
        <div class="mt-4">
          <p class="text-sm text-base-content/60">Try:</p>
          <ul class="text-sm text-base-content/60 mt-2">
            <li>‚Ä¢ Checking your spelling</li>
            <li>‚Ä¢ Using different keywords</li>
            <li>‚Ä¢ Expanding your search scope</li>
            <li>‚Ä¢ Removing filters</li>
          </ul>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Pagination -->
  <% if results[:pagination] && results[:pagination][:total_pages] > 1 %>
    <div class="flex justify-center">
      <div class="join">
        <% if results[:pagination][:has_prev_page] %>
          <button class="join-item btn" data-action="click->search#goToPage" data-page="<%= results[:pagination][:current_page] - 1 %>">
            ¬´ Previous
          </button>
        <% end %>
        
        <% (1..results[:pagination][:total_pages]).each do |page_num| %>
          <% if (page_num - results[:pagination][:current_page]).abs <= 2 || page_num == 1 || page_num == results[:pagination][:total_pages] %>
            <button 
              class="join-item btn <%= 'btn-active' if page_num == results[:pagination][:current_page] %>"
              data-action="click->search#goToPage" 
              data-page="<%= page_num %>"
            >
              <%= page_num %>
            </button>
          <% elsif (page_num - results[:pagination][:current_page]).abs == 3 %>
            <button class="join-item btn btn-disabled">...</button>
          <% end %>
        <% end %>
        
        <% if results[:pagination][:has_next_page] %>
          <button class="join-item btn" data-action="click->search#goToPage" data-page="<%= results[:pagination][:current_page] + 1 %>">
            Next ¬ª
          </button>
        <% end %>
      </div>
    </div>
  <% end %>
</div>